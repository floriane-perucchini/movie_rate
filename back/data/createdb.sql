BEGIN;

DROP TABLE IF EXISTS "user", "movie_to_see";

CREATE TABLE IF NOT EXISTS "user" (
	"id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"email" TEXT NOT NULL UNIQUE, 
	"password" TEXT NOT NULL,
	"access_token" TEXT,
	"refresh_token" TEXT,
	"created_at" TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
	"updated_at" TIMESTAMPTZ
);

CREATE TABLE IF NOT EXISTS "movie_to_see" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "user_id" INTEGER NOT NULL REFERENCES "user" ("id") ON DELETE CASCADE,
  "movie_id" INTEGER NOT NULL,
  "created_at" TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
  "updated_at" TIMESTAMPTZ
);

COMMIT;

